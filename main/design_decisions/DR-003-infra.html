
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DR-003-Infra: Devcontainer Strategy for S-CORE &#8212; S-CORE  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/css/score.css?v=6e51530f" />
    <link rel="stylesheet" type="text/css" href="../_static/css/score_needs.css?v=e97392eb" />
    <link rel="stylesheet" type="text/css" href="../_static/css/score_design.css?v=d9fd870c" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_style.css?v=92936fa5" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/modern.css?v=803738c0" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
    <script src="../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
    <script src="../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
    <script src="../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
    <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'design_decisions/DR-003-infra';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://qorix-group.github.io/score/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Eclipse S-CORE (Eclipse Safe Open Vehicle Core)" href="../introduction/index.html" />
    <link rel="prev" title="DR-002-Infra: Integration Testing in a Distributed Monolith" href="DR-002-infra.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Eclipse S-CORE</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../requirements/index.html">
    Requirements
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../features/index.html">
    Features
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../modules/index.html">
    Modules
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contribute/index.html">
    Contribute
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../score_releases/index.html">
    Releases
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../score_tools/index.html">
    Tools
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../platform_management_plan/index.html">
    PMP
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://projects.eclipse.org/projects/automotive.score">
    Eclipse
  </a>
</li>


<li class=" current active">
  <a class="nav-link dropdown-item nav-internal" href="index.html">
    Decision Records
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../introduction/index.html">
    Eclipse S-CORE (Eclipse Safe Open Vehicle Core)
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../requirements/index.html">
    Requirements
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../features/index.html">
    Features
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../modules/index.html">
    Modules
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contribute/index.html">
    Contribute
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../score_releases/index.html">
    Releases
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../score_tools/index.html">
    Tools
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../platform_management_plan/index.html">
    PMP
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://projects.eclipse.org/projects/automotive.score">
    Eclipse
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Decision Records
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../introduction/index.html">
    Eclipse S-CORE (Eclipse Safe Open Vehicle Core)
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="DR-001-infra.html">DR-001-Infra: Integration Strategy for External Development Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="DR-002-infra.html">DR-002-Infra: Integration Testing in a Distributed Monolith</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">DR-003-Infra: Devcontainer Strategy for S-CORE</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Decision Records</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">DR-003-Infra: Devcontainer Strategy for S-CORE</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <!--
Copyright (c) 2025 Contributors to the Eclipse Foundation

See the NOTICE file(s) distributed with this work for additional
information regarding copyright ownership.

This program and the accompanying materials are made available under the
terms of the Apache License Version 2.0 which is available at
https://www.apache.org/licenses/LICENSE-2.0

SPDX-License-Identifier: Apache-2.0
-->
<section id="dr-003-infra-devcontainer-strategy-for-s-core">
<h1>DR-003-Infra: Devcontainer Strategy for S-CORE<a class="headerlink" href="#dr-003-infra-devcontainer-strategy-for-s-core" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Status:</strong> Proposed</p></li>
<li><p><strong>Owner:</strong> Infrastructure Community</p></li>
<li><p><strong>Date:</strong> 2025-10-06</p></li>
</ul>
<hr class="docutils" />
<section id="context-problem">
<h2>1. Context / Problem<a class="headerlink" href="#context-problem" title="Link to this heading">#</a></h2>
<p>S-CORE contributors require a consistent, efficient, and reproducible local development environment. Today, individual developers set up their own local tooling, which leads to divergence in dependencies, performance bottlenecks, and onboarding friction. To address this, we want to standardize on <a class="reference external" href="https://containers.dev/">Dev Containers</a> as the foundation for S-CORE development.</p>
<p>The main question: <strong>Should we adopt a single monolithic devcontainer for the full stack, a multi-container approach (via Docker Compose), or a hybrid strategy?</strong></p>
<p>Additionally, we must ensure that devcontainers are usable both <strong>locally</strong> and in <strong>CI/CD pipelines</strong>. This introduces the challenge of balancing <strong>developer experience</strong> (rich local environments) with <strong>performance and efficiency</strong> (leaner CI/CD containers).</p>
</section>
<hr class="docutils" />
<section id="goals-and-requirements">
<h2>2. Goals and Requirements<a class="headerlink" href="#goals-and-requirements" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p><strong>Performance</strong>: Acceptable build/startup times and reasonable resource usage, both locally and in CI/CD.
1a. <strong>Startup Performance</strong>: Fast container initialization for productive development workflows.</p></li>
<li><p><strong>Maintainability</strong>: Easy updates of dependencies and configurations.</p></li>
<li><p><strong>Flexibility</strong>: Support for different developer workflows (e.g. development of modules communication, lifecycle, persistency, etc.).</p></li>
<li><p><strong>Isolation</strong>: Clear separation of dependencies between S-CORE modules.</p></li>
<li><p><strong>Complexity</strong>: Avoid unnecessary overhead in setup and troubleshooting.</p></li>
<li><p><strong>Integration</strong>: IDE support (e.g. <a class="reference external" href="https://code.visualstudio.com/docs/devcontainers/containers">VS Code Dev Containers</a>) and compatibility with Bazel/CI pipelines.</p></li>
<li><p><strong>Consistency Across Environments</strong>: Local devcontainers and CI/CD containers should share a common base to avoid divergence.</p></li>
</ol>
</section>
<hr class="docutils" />
<section id="options-considered">
<h2>3. Options Considered<a class="headerlink" href="#options-considered" title="Link to this heading">#</a></h2>
<section id="single-monolithic-devcontainer">
<h3>3.1 Single Monolithic Devcontainer<a class="headerlink" href="#single-monolithic-devcontainer" title="Link to this heading">#</a></h3>
<p>A single container image includes all tools, dependencies, and services needed across the S-CORE stack.</p>
<p><strong>Pros</strong>:</p>
<ul class="simple">
<li><p>Simple onboarding: one container to run.</p></li>
<li><p>Consistency: uniform tooling across contributors and CI/CD.</p></li>
<li><p>Strong IDE integration.</p></li>
</ul>
<p><strong>Cons</strong>:</p>
<ul class="simple">
<li><p>Heavyweight: slow to build and update.</p></li>
<li><p>Wasted resources: contributors working on a subset must still run the full image.</p></li>
<li><p>Harder long-term maintainability due to dependency conflicts.</p></li>
<li><p>Inefficient for CI/CD, where only a subset of tools is needed.</p></li>
</ul>
</section>
<section id="multi-container-docker-compose">
<h3>3.2 Multi-Container (Docker Compose)<a class="headerlink" href="#multi-container-docker-compose" title="Link to this heading">#</a></h3>
<p>Each S-CORE module (e.g. communication, lifecycle, persistency) runs in its own devcontainer, orchestrated with Docker Compose.</p>
<p><strong>Pros</strong>:</p>
<ul class="simple">
<li><p>Isolation: clear boundaries between components.</p></li>
<li><p>Flexibility: contributors can run only the modules they need.</p></li>
<li><p>Easier dependency upgrades per module.</p></li>
</ul>
<p><strong>Cons</strong>:</p>
<ul class="simple">
<li><p>More complex setup and orchestration.</p></li>
<li><p>Increased cognitive load for new developers.</p></li>
<li><p>IDE integration can be more challenging than with a single container.</p></li>
<li><p>Higher complexity to align CI/CD with local multi-container setups.</p></li>
<li><p>Performance overhead from container orchestration and inter-container communication.</p></li>
<li><p>Using different devcontainers can introduce friction for collaboration (e.g. “Works in my devcontainer”)</p></li>
</ul>
</section>
<section id="hybrid-approach-with-devcontainer-features">
<h3>3.3 Hybrid Approach with Devcontainer Features<a class="headerlink" href="#hybrid-approach-with-devcontainer-features" title="Link to this heading">#</a></h3>
<p>A comprehensive <strong>base devcontainer</strong> provides all tooling needed for both development and CI/CD (Bazel, git, linters, build tools). On top of it, optional <strong>devcontainer features</strong> can be added for specialized local development workflows without rebuilding the base image.</p>
<p>The base image serves both <strong>local development</strong> and <strong>CI/CD pipelines</strong> to ensure consistency. Additional development tools (debuggers, IDE integrations, documentation generators) are added via devcontainer features only when needed locally. Developers can customize locally by devcontainer.json (may cause issues since devcontainer.json is under version control - mitigation: code reviews).</p>
<p><strong>Pros</strong>:</p>
<ul class="simple">
<li><p>Perfect consistency between local and CI/CD environments (same base image).</p></li>
<li><p>Flexibility through devcontainer features without base image complexity.</p></li>
<li><p>Leverages existing devcontainer ecosystem and VS Code integration.</p></li>
<li><p>Reduces maintenance overhead compared to multiple specialized images.</p></li>
<li><p>Fast container startup: All tools pre-installed, no runtime feature installation.</p></li>
<li><p>Predictable performance: No dependency on network speed or external service availability during container startup.</p></li>
</ul>
<p><strong>Cons</strong>:</p>
<ul class="simple">
<li><p>Base image may be larger than minimal CI requirements.</p></li>
<li><p>Need to carefully evaluate which tools justify separate features vs. inclusion in base image.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="decision">
<h2>4. Decision<a class="headerlink" href="#decision" title="Link to this heading">#</a></h2>
<p>We adopt the <strong>Hybrid Approach with Devcontainer Features</strong>:</p>
<ul class="simple">
<li><p>A <strong>comprehensive base devcontainer</strong> includes all tools needed for both development and CI/CD.</p></li>
<li><p><strong>Devcontainer features</strong> add specialized tooling for local development when justified by significant size/complexity.</p></li>
<li><p><strong>Same base image</strong> used in both local development and CI/CD pipelines for maximum consistency.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="rationale">
<h2>5. Rationale<a class="headerlink" href="#rationale" title="Link to this heading">#</a></h2>
<p>Option 3.1 has been rejected because the probability that the container grows big is very high (with the growing necessity of features inside the container).
Option 3.2 (multi repo approach) has been rejected because the container orchestration would not be trivial and would cause several problems (see cons). Additionally, the multi repo approach is a poor fit to the design of the Bazel integration.
Option 3.3 is a compromise of 3.1 and 3.2 and has been selected therefore.</p>
</section>
<hr class="docutils" />
<section id="consequences-challenges">
<h2>6. Consequences &amp; Challenges<a class="headerlink" href="#consequences-challenges" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>Supply chain security</strong>: Devcontainer features from external sources introduce potential security and availability risks.</p></li>
<li><p><strong>Feature evaluation</strong>: Clear criteria needed for when tools justify separate features vs. base image inclusion.</p></li>
<li><p><strong>Base image size</strong>: May be larger than minimal CI requirements, but ensures consistency.</p></li>
<li><p><strong>Feature maintenance</strong>: Need to monitor and potentially archive critical external devcontainer features.</p></li>
<li><p><strong>Runtime performance</strong>: Feature-based approaches may cause delays at first container startup due to on-the-fly installation.</p></li>
<li><p><strong>Network dependency</strong>: Features require internet connectivity for initial installation, potentially limiting offline development workflows.</p></li>
<li><p><strong>Documentation</strong>: Must explain when and how to use devcontainer features safely.</p></li>
<li><p><strong>Interim</strong>: As long as we do not have hermetic builds in Bazel, the devontainer approach is a feasably interim step to ensure the right tools in the correct version are available (e.g. gcc_x.y.z, python_a.b.c, etc.)</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="next-steps">
<h2>7. Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Extend the existing <a class="reference external" href="https://github.com/eclipse-score/devcontainer">S-CORE central devcontainer</a> to include <strong>all tools needed for CI/CD</strong> as the comprehensive base image.</p></li>
<li><p>Evaluate and create <strong>devcontainer features</strong> only for tools that add significant size/complexity and are not needed in CI/CD.</p></li>
<li><p>Establish <strong>supply chain security guidelines</strong> for evaluating, auditing, and potentially archiving external devcontainer features.</p></li>
<li><p>Use the <strong>same base image</strong> for both local development and CI/CD pipelines to ensure consistency.</p></li>
<li><p>Update contributor documentation to clarify:</p>
<ul class="simple">
<li><p>when to use the base container,</p></li>
<li><p>when to use extensions,</p></li>
<li><p>how CI/CD leverages the lean variant.</p></li>
</ul>
</li>
<li><p>Validate the approach with pilot projects across different S-CORE components, refining layering and documentation before broad rollout.</p></li>
</ol>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="DR-002-infra.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">DR-002-Infra: Integration Testing in a Distributed Monolith</p>
      </div>
    </a>
    <a class="right-next"
       href="../introduction/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Eclipse S-CORE (Eclipse Safe Open Vehicle Core)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#context-problem">1. Context / Problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#goals-and-requirements">2. Goals and Requirements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#options-considered">3. Options Considered</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#single-monolithic-devcontainer">3.1 Single Monolithic Devcontainer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multi-container-docker-compose">3.2 Multi-Container (Docker Compose)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hybrid-approach-with-devcontainer-features">3.3 Hybrid Approach with Devcontainer Features</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decision">4. Decision</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rationale">5. Rationale</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#consequences-challenges">6. Consequences &amp; Challenges</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next-steps">7. Next Steps</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/qorix-group/score/edit/main/docs/design_decisions/DR-003-infra.md">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/design_decisions/DR-003-infra.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>